<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 7.1.1">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha256-wiz7ZSCn/btzhjKDQBms9Hx4sSeUYsDrTLg7roPstac=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancyapps-ui/5.0.33/fancybox/fancybox.css" integrity="sha256-gkQVf8UKZgQ0HyuxL/VnacadJ+D2Kox2TCEBuNQg5+w=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pace/1.2.4/themes/blue/pace-theme-minimal.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pace/1.2.4/pace.min.js" integrity="sha256-gqd7YTjg/BtfqWSwsJOvndl0Bxc8gFImLEkXQT8+qj0=" crossorigin="anonymous"></script>

<script class="next-config" data-name="main" type="application/json">{"hostname":"moxuef.github.io","root":"/","images":"/images","scheme":"Muse","darkmode":false,"version":"8.19.1","exturl":false,"sidebar":{"position":"right","display":"post","padding":18,"offset":12},"copycode":{"enable":true,"style":null},"fold":{"enable":false,"height":500},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>

    <meta name="description" content="Week 3 refers to the second week of semester 2: [02.12 - 02.18] Normal Group Meeting: 02.17.2024  #Cubli Assmbly As expected, the main control board arrived on time after SMT. During this week&#39;s lab,">
<meta property="og:type" content="article">
<meta property="og:title" content="Week 3: Obvious Progress but Greater Challenges.">
<meta property="og:url" content="https://moxuef.github.io/2024/02/18/Week-3/index.html">
<meta property="og:site_name" content="Cubli">
<meta property="og:description" content="Week 3 refers to the second week of semester 2: [02.12 - 02.18] Normal Group Meeting: 02.17.2024  #Cubli Assmbly As expected, the main control board arrived on time after SMT. During this week&#39;s lab,">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://moxuef.github.io/images/Week-3/Assmbly.jpg">
<meta property="article:published_time" content="2024-02-18T22:34:58.000Z">
<meta property="article:modified_time" content="2024-02-18T22:34:58.000Z">
<meta property="article:author" content="UoL Y2 Project Group 2P45">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://moxuef.github.io/images/Week-3/Assmbly.jpg">


<link rel="canonical" href="https://moxuef.github.io/2024/02/18/Week-3/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"en","comments":true,"permalink":"https://moxuef.github.io/2024/02/18/Week-3/","path":"2024/02/18/Week-3/","title":"Week 3: Obvious Progress but Greater Challenges."}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Week 3: Obvious Progress but Greater Challenges. | Cubli</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">Cubli</p>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">The Self-Balanced Cube</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="Search" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>About</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a></li><li class="menu-item menu-item-schedule"><a href="/archives/" rel="section"><i class="fa fa-calendar fa-fw"></i>Schedule</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="UoL Y2 Project Group 2P45"
      src="/images/avatar.gif">
  <p class="site-author-name" itemprop="name">UoL Y2 Project Group 2P45</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">10</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">3</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="https://github.com/MoxueF/MoxueF.github.io" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;MoxueF&#x2F;MoxueF.github.io" rel="noopener me" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:sgfjia@liverpool.ac.uk" title="E-Mail → mailto:sgfjia@liverpool.ac.uk" rel="noopener me" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>

        </div>
      </div>
    </div>

    
    <div class="sidebar-inner sidebar-blogroll">
      <div class="links-of-blogroll animated">
        <div class="links-of-blogroll-title"><i class="fa fa-globe fa-fw"></i>
          Links
        </div>
        <ul class="links-of-blogroll-list">
            <li class="links-of-blogroll-item">
              <a href="https://www.liverpool.ac.uk/" title="https:&#x2F;&#x2F;www.liverpool.ac.uk&#x2F;" rel="noopener" target="_blank">University of Liverpool</a>
            </li>
        </ul>
      </div>
    </div>
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="en">
    <link itemprop="mainEntityOfPage" href="https://moxuef.github.io/2024/02/18/Week-3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="UoL Y2 Project Group 2P45">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Cubli">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="Week 3: Obvious Progress but Greater Challenges. | Cubli">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Week 3: Obvious Progress but Greater Challenges.
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2024-02-18 22:34:58" itemprop="dateCreated datePublished" datetime="2024-02-18T22:34:58+00:00">2024-02-18</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Weekly-Activities/" itemprop="url" rel="index"><span itemprop="name">Weekly Activities</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="Word count in article">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">Word count in article: </span>
      <span>553</span>
    </span>
    <span class="post-meta-item" title="Reading time">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">Reading time &asymp;</span>
      <span>2 mins.</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody"><p>Week 3 refers to the second week of semester 2: [02.12 - 02.18]</p>
<p>Normal Group Meeting: 02.17.2024</p>
<hr />
<h3 id="cubli-assmbly">#Cubli Assmbly</h3>
<p>As expected, the main control board arrived on time after SMT. During this week's lab, we collectively conducted the initial assembly and testing of Cubli. The results were quite successful — at least Cubli has now become a cube, rather than a collection of scattered panels, PCBs, and ribbon cables.</p>
<p><img src="/images/Week-3/Assmbly.jpg" style="zoom:45%;" align=center/></p>
<hr />
<h3 id="great-challenge-abnormal-motor-operation-status">#Great Challenge: Abnormal Motor Operation Status</h3>
<span id="more"></span>
<p>After the complete assembly of Cubli, serial port debugging revealed that a significant torque caused Cubli to uncontrolledly spin at high speed . This issue was traced back to an imbalance in angular momentum, with one motor (motor 1) rotating more slowly, weaker and less steadily than expected.</p>
<h4 id="encoder-error"># Encoder Error ?</h4>
<p>The initial suspicion fell on the magnetic encoder, particularly the AS5600 chip, which was thought to be reading an incorrect angle and thus leading to an erroneous target speed for the motor.</p>
<p>A diagnostic task was implemented in the microcontroller unit (MCU) to output the motor angles through the serial port at a higher priority, aiming to closely monitor the angle readings.</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">xTaskCreatePinnedToCore</span>(SomeTask, <span class="string">&quot;some&quot;</span>, <span class="number">5000</span>, <span class="literal">NULL</span>, <span class="number">3</span>, <span class="literal">NULL</span>, <span class="number">1</span>)</span><br><span class="line">-------</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">SomeTask</span><span class="params">(<span class="type">void</span> *parameter)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(;;)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(</span><br><span class="line">        	<span class="string">&quot;A = %0.2f\r\n&quot;</span>,</span><br><span class="line">        	motor1.sensor-&gt;<span class="built_in">getAngle</span>());</span><br><span class="line">        <span class="comment">// A function provided by the Simple FOC lib to get current motor angle</span></span><br><span class="line">        <span class="built_in">delay</span>(<span class="number">50</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>After conducting tests and comparing the outputs of motor 1 and motor 2, this theory was dismissed as the cause of the issue.</p>
<hr />
<h4 id="motor-driver-error"># Motor Driver Error !</h4>
<p>Given the problem was with the motor's rotation speed, and considering that the brushless motor was initially tested in an open loop with a 0.5V voltage, it was suspected that the motor might be missing a phase.</p>
<p>Focus was then shifted towards inspecting the motor itself. By detaching motor 1 and measuring, it was confirmed that the resistance between the three phases was normal and equal, effectively ruling out the motor as the source of the problem.</p>
<p>Attention was then directed to the 7-pin port connecting the AS5600 to the main control board. After examination with an oscilloscope, it was discovered that the PWM output to motor 1 was abnormal, indicating a missing PWM signal.</p>
<p>Further measurements were taken at the power supply and output pins of motor 1's driver chip, revealing that while the power supply was normal, there was indeed a missing phase in the PWM output.</p>
<p>At this point, two potential causes remained: an issue with the signal transmission from the MCU to the motor driver chip, or a fault within the motor driver chip itself. Due to the lack of sufficient equipment, the we was unable to resolve the issue immediately.</p>
<p>This is a significant setback for us, as point balancing requires the coordination of three motors, and the failure of one motor means that point balancing cannot be achieved. The good news is, single-sided balancing only requires Motor2: a properly functioning motor.</p>
<hr />
<h3 id="next-week-plan">#Next Week Plan</h3>
<ul>
<li>Strive to achieve single-sided balance</li>
<li>Seek solutions to the motor driver malfunction issue</li>
</ul>
<hr />
<h3 id="theory-study">#Theory Study</h3>
<p>This week, we primarily studied various communication protocols, including I2C, CAN and UART. with introducing some knowledge about FreeRTOS and ARHS, which are the basis of Code analysis . For more information, please visit Coding Basis.</p>

    </div>

    
    
    

    <footer class="post-footer">

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2024/02/12/Week-2/" rel="prev" title="Week 2: Focus on Hardware and Software Design">
                  <i class="fa fa-angle-left"></i> Week 2: Focus on Hardware and Software Design
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2024/02/19/Coding-Basis/" rel="next" title="“Coding Basis”">
                  “Coding Basis” <i class="fa fa-angle-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2024</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">UoL Y2 Project Group 2P45</span>
  </div>
<div class="wordcount">
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-line"></i>
    </span>
      <span>Word count total: </span>
    <span title="Word count total">3k</span>
  </span>
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
      <span>Reading time total &asymp;</span>
    <span title="Reading time total">13 mins.</span>
  </span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" rel="noopener" target="_blank">NexT.Muse</a>
  </div>
<script type="text/javascript" src="/js/click_love.js"></script>



    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

  <a href="https://github.com/MoxueF/MoxueF.github.io" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fancyapps-ui/5.0.33/fancybox/fancybox.umd.js" integrity="sha256-+2+qOqR8CKoHh/AsVR9k2qaDBKWjYNC2nozhYmv5j9k=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.1/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>




  <script src="/js/third-party/fancybox.js"></script>

  <script src="/js/third-party/pace.js"></script>


  




  

  <script class="next-config" data-name="enableMath" type="application/json">false</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"tags":"none","js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.js","integrity":"sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI="}}</script>
<script src="/js/third-party/math/mathjax.js"></script>



  <script type="text/javascript" src="/js/snow.js"></script>

</body>
</html>
