<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 7.1.1">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha256-wiz7ZSCn/btzhjKDQBms9Hx4sSeUYsDrTLg7roPstac=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancyapps-ui/5.0.33/fancybox/fancybox.css" integrity="sha256-gkQVf8UKZgQ0HyuxL/VnacadJ+D2Kox2TCEBuNQg5+w=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pace/1.2.4/themes/blue/pace-theme-minimal.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pace/1.2.4/pace.min.js" integrity="sha256-gqd7YTjg/BtfqWSwsJOvndl0Bxc8gFImLEkXQT8+qj0=" crossorigin="anonymous"></script>

<script class="next-config" data-name="main" type="application/json">{"hostname":"moxuef.github.io","root":"/","images":"/images","scheme":"Muse","darkmode":false,"version":"8.19.1","exturl":false,"sidebar":{"position":"right","display":"post","padding":18,"offset":12},"copycode":{"enable":true,"style":null},"fold":{"enable":false,"height":500},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>

    <meta name="description" content="This article briefly outlines the design principle of all the PCB applied in this cube.  #Main Control Board (MCB) The entire main control board can be simply divided into two major parts: signal comm">
<meta property="og:type" content="article">
<meta property="og:title" content="Hardware Design">
<meta property="og:url" content="https://moxuef.github.io/2024/02/12/Hardware-Design/index.html">
<meta property="og:site_name" content="Cubli">
<meta property="og:description" content="This article briefly outlines the design principle of all the PCB applied in this cube.  #Main Control Board (MCB) The entire main control board can be simply divided into two major parts: signal comm">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://moxuef.github.io/images/Hardware-Design/Signal.jpg">
<meta property="og:image" content="https://moxuef.github.io/images/Hardware-Design/Battery.jpg">
<meta property="og:image" content="https://moxuef.github.io/images/Hardware-Design/MCB.jpg">
<meta property="og:image" content="https://moxuef.github.io/images/Hardware-Design/ESC.jpg">
<meta property="og:image" content="https://moxuef.github.io/images/Hardware-Design/12to5.jpg">
<meta property="og:image" content="https://moxuef.github.io/images/Hardware-Design/5to3.jpg">
<meta property="og:image" content="https://moxuef.github.io/images/Hardware-Design/BB.jpg">
<meta property="article:published_time" content="2024-02-12T01:04:29.000Z">
<meta property="article:modified_time" content="2024-02-12T01:04:29.000Z">
<meta property="article:author" content="UoL Y2 Project Group 2P45">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://moxuef.github.io/images/Hardware-Design/Signal.jpg">


<link rel="canonical" href="https://moxuef.github.io/2024/02/12/Hardware-Design/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"en","comments":true,"permalink":"https://moxuef.github.io/2024/02/12/Hardware-Design/","path":"2024/02/12/Hardware-Design/","title":"Hardware Design"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Hardware Design | Cubli</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">Cubli</p>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">The Self-Balanced Cube</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="Search" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>About</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a></li><li class="menu-item menu-item-schedule"><a href="/archives/" rel="section"><i class="fa fa-calendar fa-fw"></i>Schedule</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="UoL Y2 Project Group 2P45"
      src="/images/avatar.gif">
  <p class="site-author-name" itemprop="name">UoL Y2 Project Group 2P45</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">5</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">3</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="https://github.com/MoxueF/MoxueF.github.io" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;MoxueF&#x2F;MoxueF.github.io" rel="noopener me" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:sgfjia@liverpool.ac.uk" title="E-Mail → mailto:sgfjia@liverpool.ac.uk" rel="noopener me" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>

        </div>
      </div>
    </div>

    
    <div class="sidebar-inner sidebar-blogroll">
      <div class="links-of-blogroll animated">
        <div class="links-of-blogroll-title"><i class="fa fa-globe fa-fw"></i>
          Links
        </div>
        <ul class="links-of-blogroll-list">
            <li class="links-of-blogroll-item">
              <a href="https://www.liverpool.ac.uk/" title="https:&#x2F;&#x2F;www.liverpool.ac.uk&#x2F;" rel="noopener" target="_blank">University of Liverpool</a>
            </li>
        </ul>
      </div>
    </div>
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="en">
    <link itemprop="mainEntityOfPage" href="https://moxuef.github.io/2024/02/12/Hardware-Design/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="UoL Y2 Project Group 2P45">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Cubli">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="Hardware Design | Cubli">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Hardware Design
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2024-02-12 01:04:29" itemprop="dateCreated datePublished" datetime="2024-02-12T01:04:29+00:00">2024-02-12</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Theory/" itemprop="url" rel="index"><span itemprop="name">Theory</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="Word count in article">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">Word count in article: </span>
      <span>535</span>
    </span>
    <span class="post-meta-item" title="Reading time">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">Reading time &asymp;</span>
      <span>2 mins.</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody"><p>This article briefly outlines the design principle of all the PCB applied in this cube.</p>
<hr />
<h2 id="main-control-board-mcb">#Main Control Board (MCB)</h2>
<p>The entire main control board can be simply divided into two major parts: signal communication and power supply. The main components of each part are as follows:</p>
<table>
<thead>
<tr class="header">
<th style="text-align: center;">Signal Line</th>
<th style="text-align: center;">Power Line</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;"><img src="/images/Hardware-Design/Signal.jpg" style="zoom:25%;" align=center/></td>
<td style="text-align: center;"><img src="/images/Hardware-Design/Battery.jpg" style="zoom:25%;" align=center/></td>
</tr>
</tbody>
</table>
<p>Simply put, the main control PCB provides:</p>
<ul>
<li>2 x ESP32s as Microprocessors -- ①</li>
<li>3-channel brushless FOC (Field Oriented Control) drive, 12V input -- ②</li>
<li>A circuit for boosting a 5V input to charge a 3S lithium battery -- ③</li>
<li>A 3S lithium battery charge and discharge balancing circuit -- ④</li>
<li>Button input and indicator light output -- ⑤</li>
<li>CAN communication between MCU1 and MCU2 -- ⑥</li>
</ul>
<p><img src="/images/Hardware-Design/MCB.jpg" style="zoom:55%;" align=center/></p>
<hr />
<span id="more"></span>
<h3 id="motor-electronic-speed-controller-esc">#Motor Electronic Speed Controller (ESC）</h3>
<p>Three TI DRV8313 driver chips are applied for receiving signals from a microcontroller and accordingly adjusting the phase and frequency of the three-phase power supply to drive the motor rotation. Following is a simple schematic provided on the <a target="_blank" rel="noopener" href="https://www.ti.com/lit/gpn/drv8313">data sheet</a> by TEXAS INSTRUMENT.</p>
<p><img src="/images/Hardware-Design/ESC.jpg" style="zoom:60%;" align=center/></p>
<hr />
<h3 id="v-to-5v-5v-to-3.3v-step-down-module">#12V-to-5V &amp; 5V-to-3.3V Step-Down Module</h3>
<h4 id="v-to-5v-tps5430">##12V-to-5V (<a target="_blank" rel="noopener" href="https://www.ti.com/lit/gpn/tps5430">TPS5430</a>)</h4>
<p>This module is dedicated to stepping down the 12V power supply from a 3S lithium battery to 5V, thereby powering the SOP8, which is a high-speed CAN bus transceiver chip. At the same time, it also serves as the input for further stepping down from 5V to 3.3V.</p>
<h4 id="v-to-3.3vams1117">##5V-to-3.3V(<a target="_blank" rel="noopener" href="http://www.advanced-monolithic.com/pdf/ds1117.pdf">AMS1117</a>)</h4>
<p>The AMS1117 regulator chip is used to step down the 5V input to 3.3V. The 3.3V power supply is crucial as it is responsible for powering all the following chips:</p>
<ul>
<li>2 ESP32 microprocessor chips</li>
<li>A MPU6050 chip</li>
<li>Three motor magnetic encoder chips AS5600</li>
</ul>
<table>
<thead>
<tr class="header">
<th style="text-align: center;">12V to 5V @ 3A</th>
<th style="text-align: center;">5V to 3.3V @ 1A</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;"><img src="/images/Hardware-Design/12to5.jpg" style="zoom:55%;" align=center/></td>
<td style="text-align: center;"><img src="/images/Hardware-Design/5to3.jpg" style="zoom:55%;" align=center/></td>
</tr>
</tbody>
</table>
<hr />
<h2 id="battery-control">#Battery Control</h2>
<p>The battery control section is mainly divided into two parts: a 5V-to-12V boost charging module and a battery balancer.</p>
<p>The former one is a bit complicated and will not be covered in this blog. All we should know is that this module applies a <a target="_blank" rel="noopener" href="https://pdf1.alldatasheet.com/datasheet-pdf/view/1133224/CONSONANCE/CN3300.html">CN3300</a></p>
<p>battery power management chip,</p>
<p>For the latter part: #### ##Battery Balancer</p>
<p>Since there are 3 lithium batteries, the main control board includes a passive balancing circuit as follows:</p>
<p><img src="/images/Hardware-Design/BB.jpg" style="zoom:65%;" align=center/></p>
<p>n a series battery pack, especially in lithium-ion battery packs, even under the same initial conditions, battery cells can gradually develop voltage differences due to aging speed, temperature differences, and production variances. If not balanced, some battery cells may become overcharged or over-discharged, leading to battery damage or decreased performance.</p>
<p>The IC determines whether to activate the corresponding balancing MOSFETs to balance the battery by continuously monitoring the voltage between VDD and VSS. When necessary, it drains current from the battery cell through internal transistors to an external resistor (RBAL1, RBAL2, RBAL3), thereby reducing the voltage of that cell.</p>

    </div>

    
    
    

    <footer class="post-footer">

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2024/02/04/Control-Theory/" rel="prev" title="Automatic Control Principles">
                  <i class="fa fa-angle-left"></i> Automatic Control Principles
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2024/03/01/Intro/" rel="next" title="Intro">
                  Intro <i class="fa fa-angle-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2024</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">UoL Y2 Project Group 2P45</span>
  </div>
<div class="wordcount">
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-line"></i>
    </span>
      <span>Word count total: </span>
    <span title="Word count total">2k</span>
  </span>
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
      <span>Reading time total &asymp;</span>
    <span title="Reading time total">6 mins.</span>
  </span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" rel="noopener" target="_blank">NexT.Muse</a>
  </div>
<script type="text/javascript" src="/js/click_love.js"></script>



    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

  <a href="https://github.com/MoxueF/MoxueF.github.io" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fancyapps-ui/5.0.33/fancybox/fancybox.umd.js" integrity="sha256-+2+qOqR8CKoHh/AsVR9k2qaDBKWjYNC2nozhYmv5j9k=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.1/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>




  <script src="/js/third-party/fancybox.js"></script>

  <script src="/js/third-party/pace.js"></script>


  




  

  <script class="next-config" data-name="enableMath" type="application/json">true</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"tags":"none","js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.js","integrity":"sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI="}}</script>
<script src="/js/third-party/math/mathjax.js"></script>



  <script type="text/javascript" src="/js/snow.js"></script>

</body>
</html>
